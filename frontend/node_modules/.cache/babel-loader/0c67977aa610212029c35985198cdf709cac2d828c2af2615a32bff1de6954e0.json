{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      players: [],\n      favorPlayers: [],\n      currentPage: 1,\n      totalRecord: 0,\n      up: 0,\n      down: 0,\n      searchText: \"\",\n      favorPid: [],\n      utype: this.$route.query.utype\n    };\n  },\n  methods: {\n    getPlayers() {\n      axios.get(\"/api/player/selectPlayers\").then(response => {\n        //console.log(response)\n        this.players = response.data.obj;\n        this.currentPage = 1;\n        this.initPage();\n      });\n    },\n    pageAdd() {\n      if (this.up == this.totalRecord) {\n        alert(\"It is Last Page\");\n      } else {\n        this.currentPage++;\n        this.initPage();\n      }\n    },\n    pageSub() {\n      if (this.down == 0) {\n        alert(\"It is First Page\");\n      } else {\n        this.currentPage--;\n        this.initPage();\n      }\n    },\n    search() {\n      axios.get(\"/api/player/selectPlayers\", {\n        params: {\n          search: this.searchText\n        }\n      }).then(response => {\n        console.log(response.data.obj);\n        this.players = response.data.obj;\n        this.currentPage = 1;\n        this.initPage();\n      });\n    },\n    order(params) {\n      axios.get(\"/api/player/selectPlayers\", {\n        params: {\n          orderby: params\n        }\n      }).then(response => {\n        console.log(response.data);\n        console.log(response.data.obj);\n        this.players = response.data.obj;\n        this.currentPage = 1;\n        this.initPage();\n      });\n    },\n    getFavor() {\n      var uid;\n      axios.get(\"/api/user/getLogining\").then(response => {\n        //console.log(response.data.obj)\n        if (response.data.obj == null) {\n          //未登录\n          this.favorPlayers = [];\n        } else {\n          //已登录\n          uid = response.data.obj.uid;\n          axios.get(\"/api/favor/player\", {\n            params: {\n              id: uid\n            }\n          }).then(res => {\n            this.favorPlayers = res.data.obj;\n            this.favorPid = [];\n            for (var i = 0; i < this.favorPlayers.length; i++) {\n              this.favorPid[i] = this.favorPlayers[i].pid;\n            }\n          });\n        }\n      });\n    },\n    myfavor() {\n      var uid;\n      axios.get(\"/api/user/getLogining\").then(response => {\n        //console.log(response.data.obj)\n        if (response.data.obj == null) {\n          //未登录\n          if (confirm(\"Please Login First.\")) {\n            this.$router.push(\"/login\");\n          }\n        } else {\n          //已登录，将players替换为favorPlayers\n          this.players = this.favorPlayers;\n          this.initPage();\n        }\n      });\n    },\n    //每次players或currentPage有变化时调用，更新列表信息\n    initPage() {\n      this.totalRecord = this.players.length;\n      this.up = this.currentPage * 10 > this.totalRecord ? this.totalRecord : this.currentPage * 10;\n      this.down = (this.currentPage - 1) * 10 <= 0 ? 0 : (this.currentPage - 1) * 10;\n    },\n    follow(params) {\n      //alert(params)\n      var uid;\n      axios.get(\"/api/user/getLogining\").then(response => {\n        if (response.data.obj == null) {\n          //未登录\n          if (confirm(\"Please Login First.\")) {\n            this.$router.push(\"login\");\n          }\n        } else {\n          uid = response.data.obj.uid;\n          axios.get(\"/api/favor/create\", {\n            params: {\n              type: \"player\",\n              uid: uid,\n              id: params\n            }\n          }).then(res => {\n            //console.log(res.data)\n            this.getFavor();\n          });\n        }\n      });\n    },\n    unfollow(params) {\n      var uid;\n      axios.get(\"/api/user/getLogining\").then(response => {\n        if (response.data.obj == null) {\n          //未登录\n          if (confirm(\"Please Login First.\")) {\n            this.$router.push(\"login\");\n          }\n        } else {\n          uid = response.data.obj.uid;\n          axios.get(\"/api/favor/undo\", {\n            params: {\n              type: \"player\",\n              uid: uid,\n              id: params\n            }\n          }).then(res => {\n            //console.log(res.data)\n            this.getFavor();\n          });\n        }\n      });\n    },\n    edit(params) {\n      this.$router.push({\n        path: \"/editPlayer\",\n        query: {\n          pid: params\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getPlayers();\n    this.getFavor();\n  },\n  watch: {\n    $route() {\n      this.getPlayers();\n      this.utype = this.$route.query.utype;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","data","players","favorPlayers","currentPage","totalRecord","up","down","searchText","favorPid","utype","$route","query","methods","getPlayers","get","then","response","obj","initPage","pageAdd","alert","pageSub","search","params","console","log","order","orderby","getFavor","uid","id","res","i","length","pid","myfavor","confirm","$router","push","follow","type","unfollow","edit","path","mounted","watch"],"sourceRoot":"","sources":["C:\\Users\\15312\\Desktop\\U\\大三上\\数据库\\课程设计\\NBAInfoSys\\frontend\\src\\components\\Player.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-wrapper\"> \r\n    <div class=\"app-content pt-3 p-md-3 p-lg-4\">\r\n      <div class=\"container-xl\">\r\n        <div class=\"row g-3 mb-4 align-items-center justify-content-between\">\r\n          <div class=\"col-auto\">\r\n            <h1 class=\"app-page-title mb-0\">PLAYER</h1>\r\n          </div>\r\n          <div class=\"col-auto\">\r\n            <div class=\"page-utilities\">\r\n              <div class=\"row g-2 justify-content-start justify-content-md-end align-items-center\">\r\n                <div class=\"col-auto\">\r\n                  <form class=\"table-search-form row gx-1 align-items-center\">\r\n                    <div class=\"col-auto\">\r\n                      <button type=\"button\" class=\"btn app-btn-secondary\" @click=\"myfavor\">My Favors</button>\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                      <button type=\"button\" class=\"btn app-btn-secondary\" @click=\"order('age')\">Order by Age</button>\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                      <button type=\"button\" class=\"btn app-btn-secondary\" @click=\"order('height')\">Order by Height</button>\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                      <button type=\"button\" class=\"btn app-btn-secondary\" @click=\"order('weight')\">Order by Weight</button>\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                      <input v-model=\"searchText\" type=\"text\" id=\"search-orders\" name=\"searchorders\" class=\"form-control search-orders\" placeholder=\"Player Name\">\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                      <button type=\"button\" class=\"btn app-btn-secondary\" @click=\"search\">Search</button>\r\n                    </div>\r\n                  </form>               \r\n                </div><!--//col-->\r\n                \r\n                \r\n              </div><!--//row-->\r\n            </div><!--//table-utilities-->\r\n          </div><!--//col-auto-->\r\n        </div><!--//row-->\r\n       \r\n        <div class=\"tab-content\" id=\"orders-table-tab-content\">\r\n          <div class=\"tab-pane fade show active\" id=\"orders-all\" role=\"tabpanel\" aria-labelledby=\"orders-all-tab\">\r\n            <div class=\"app-card app-card-orders-table shadow-sm mb-5\">\r\n              <div class=\"app-card-body\">\r\n                <div class=\"table-responsive\">\r\n                  <table class=\"table app-table-hover mb-0 text-left\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th class=\"cell\"></th>\r\n                        <th class=\"cell\">Cn Name</th>\r\n                        <th class=\"cell\">En Name</th>\r\n                        <th class=\"cell\">Height</th>\r\n                        <th class=\"cell\">Weight</th>\r\n                        <th class=\"cell\">Nation</th>\r\n                        <th class=\"cell\">Age</th>\r\n                        <th class=\"cell\" v-show=\"!this.$route.query.utype\">Follow</th>\r\n                        <th class=\"cell\" v-show=\"this.$route.query.utype\">Edit</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"player in (players).slice(down,up)\" :key=\"player.pid\">\r\n                        <td class=\"cell\">\r\n                          <img style=\"height:40px\" :src=\"('./img/player_img/' + player.imgpath)\" alt=\"player_img\">\r\n                        </td>\r\n                        <td class=\"cell\">{{ player.cnname }}</td>\r\n                        <td class=\"cell\">{{ player.enname }}</td>\r\n                        <td class=\"cell\">{{ player.height }}</td>\r\n                        <td class=\"cell\">{{ player.weight }}</td>\r\n                        <td class=\"cell\">{{ player.nation }}</td>\r\n                        <td class=\"cell\">{{ player.age }}</td>            \r\n                        <td class=\"cell\" v-show=\"!this.utype\">\r\n                          <a class=\"btn-sm app-btn-secondary\" @click=\"follow(player.pid)\" v-if=\"!this.favorPid.includes(player.pid)\">\r\n                            Follow\r\n                          </a>\r\n                          <a class=\"btn-sm app-btn-secondary\" @click=\"unfollow(player.pid)\" v-if=\"this.favorPid.includes(player.pid)\">\r\n                            Unfollow\r\n                          </a>\r\n                        </td>\r\n                        <td class=\"cell\" v-show=\"this.utype\">\r\n                          <a class=\"btn-sm app-btn-secondary\" @click=\"edit(player.pid)\" >\r\n                            Edit\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div><!--//table-responsive-->\r\n                    \r\n              </div><!--//app-card-body-->\t\t\r\n            </div><!--//app-card-->\r\n            <nav class=\"app-pagination\">\r\n              <button class=\"btn app-btn-secondary\" @click=\"pageSub\">previous</button>\r\n              <button class=\"btn app-btn-secondary\" @click=\"pageAdd\">next</button>\r\n            </nav><!--//app-pagination-->\r\n            \r\n          </div><!--//tab-pane-->\r\n        </div>\r\n        <footer class=\"app-footer\">\r\n          <div class=\"container text-center py-3\">\r\n            <small>\r\n              chen\r\n            </small>\r\n          </div>\r\n        </footer><!--//app-footer-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <h1>{{ utype }}</h1>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n  export default{\r\n    data(){\r\n      return {\r\n        players:[],\r\n        favorPlayers:[],\r\n        currentPage:1,\r\n        totalRecord:0,\r\n        up:0,\r\n        down:0,\r\n        searchText:\"\",\r\n        favorPid:[],\r\n        utype:this.$route.query.utype\r\n      }\r\n    },\r\n    methods:{\r\n      getPlayers(){\r\n        axios.get(\"/api/player/selectPlayers\").then(response => {\r\n          //console.log(response)\r\n          this.players = response.data.obj\r\n          this.currentPage = 1\r\n          this.initPage()\r\n        })\r\n      },\r\n      pageAdd(){\r\n        if(this.up == this.totalRecord){\r\n          alert(\"It is Last Page\")\r\n        }else{\r\n          this.currentPage++\r\n          this.initPage()\r\n        }\r\n      },\r\n      pageSub(){\r\n        if(this.down == 0){\r\n          alert(\"It is First Page\")\r\n        }else{\r\n          this.currentPage--\r\n          this.initPage()\r\n        }\r\n      },\r\n      search(){\r\n        axios.get(\"/api/player/selectPlayers\",{\r\n          params:{\r\n            search:this.searchText\r\n          }\r\n        }).then(response => {\r\n          console.log(response.data.obj)\r\n          this.players = response.data.obj\r\n          this.currentPage = 1\r\n          this.initPage()\r\n        })\r\n      },\r\n      order(params){\r\n        axios.get(\"/api/player/selectPlayers\",{\r\n          params:{\r\n            orderby:params\r\n          }\r\n        }).then(response => {\r\n          console.log(response.data)\r\n          console.log(response.data.obj)\r\n          this.players = response.data.obj\r\n          this.currentPage = 1\r\n          this.initPage()\r\n        })\r\n      },\r\n      getFavor(){\r\n        var uid\r\n        axios.get(\"/api/user/getLogining\").then(response => {\r\n          //console.log(response.data.obj)\r\n          if(response.data.obj == null){\r\n            //未登录\r\n            this.favorPlayers = []\r\n          }else{\r\n            //已登录\r\n            uid = response.data.obj.uid\r\n            axios.get(\"/api/favor/player\",{\r\n              params:{\r\n                id:uid       \r\n              }\r\n            }).then(res => {\r\n              this.favorPlayers = res.data.obj\r\n              this.favorPid = []\r\n              for(var i = 0;i < this.favorPlayers.length;i++){\r\n                this.favorPid[i] = this.favorPlayers[i].pid\r\n              }\r\n            })\r\n          }\r\n        })\r\n      },\r\n      myfavor(){\r\n        var uid\r\n        axios.get(\"/api/user/getLogining\").then(response => {\r\n          //console.log(response.data.obj)\r\n          if(response.data.obj == null){\r\n            //未登录\r\n            if(confirm(\"Please Login First.\")){\r\n              this.$router.push(\"/login\")\r\n            }\r\n          }else{\r\n            //已登录，将players替换为favorPlayers\r\n            this.players = this.favorPlayers\r\n            this.initPage()\r\n          }\r\n        })\r\n      },\r\n      //每次players或currentPage有变化时调用，更新列表信息\r\n      initPage(){\r\n        this.totalRecord = this.players.length\r\n        this.up = this.currentPage * 10 > this.totalRecord ? this.totalRecord : this.currentPage * 10\r\n        this.down = (this.currentPage-1) * 10 <= 0 ? 0 : (this.currentPage - 1) * 10\r\n      },\r\n      follow(params){\r\n        //alert(params)\r\n        var uid\r\n        axios.get(\"/api/user/getLogining\").then(response => {\r\n          if(response.data.obj == null){\r\n            //未登录\r\n            if(confirm(\"Please Login First.\")){\r\n              this.$router.push(\"login\")\r\n            }\r\n          }else{\r\n            uid = response.data.obj.uid\r\n            axios.get(\"/api/favor/create\",{\r\n              params:{\r\n                type:\"player\",\r\n                uid:uid,\r\n                id:params\r\n              }\r\n            }).then(res => {\r\n              //console.log(res.data)\r\n              this.getFavor()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      unfollow(params){\r\n        var uid\r\n        axios.get(\"/api/user/getLogining\").then(response => {\r\n          if(response.data.obj == null){\r\n            //未登录\r\n            if(confirm(\"Please Login First.\")){\r\n              this.$router.push(\"login\")\r\n            }\r\n          }else{\r\n            uid = response.data.obj.uid\r\n            axios.get(\"/api/favor/undo\",{\r\n              params:{\r\n                type:\"player\",\r\n                uid:uid,\r\n                id:params\r\n              }\r\n            }).then(res => {\r\n              //console.log(res.data)\r\n              this.getFavor()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      edit(params){\r\n        this.$router.push({\r\n          path:\"/editPlayer\",\r\n          query:{\r\n            pid:params\r\n          }\r\n        })\r\n      },\r\n    },\r\n    mounted() {\r\n      this.getPlayers()\r\n      this.getFavor()\r\n    },\r\n    watch:{\r\n      $route(){\r\n        this.getPlayers()\r\n        this.utype = this.$route.query.utype\r\n      }\r\n    }\r\n    \r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}